<!-- views/gallery-pagination.hbs -->
<div class="container">
  <h1>{{title}}</h1>
  <nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center" id="pagination">
      <!-- Pagination items will be displayed here -->
    </ul>
  </nav>
  <div id="image-container" class="row">
    <!-- Images will be displayed here -->
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const itemsPerPage = 3;
    let currentPage = 1;

    function fetchImages(page) {
      fetch(`/fetch-all-pagination/pages/${page}`)
        .then(response => response.json())
        .then(data => {
          const imageContainer = document.getElementById("image-container");
          imageContainer.innerHTML = "";
          data.images.forEach(image => {
            const div = document.createElement("div");
            div.classList.add("col-md-4", "mb-4");
            const img = document.createElement("img");
            img.src = `/uploads/${image}`;
            img.classList.add("img-thumbnail");
            img.style.width = "100%";
            div.appendChild(img);
            imageContainer.appendChild(div);
          });
          updatePagination(data.totalPages, data.currentPage);
        })
        .catch(error => console.error("Error fetching images:", error));
    }

    function updatePagination(totalPages, currentPage) {
      const pagination = document.getElementById("pagination");
      pagination.innerHTML = "";
      for (let i = 1; i <= totalPages; i++) {
        const li = document.createElement("li");
        li.classList.add("page-item");
        if (i === currentPage) {
          li.classList.add("active");
        }
        const a = document.createElement("a");
        a.classList.add("page-link");
        a.href = "#";
        a.textContent = i;
        a.addEventListener("click", function(event) {
          event.preventDefault();
          fetchImages(i);
        });
        li.appendChild(a);
        pagination.appendChild(li);
      }
    }

    fetchImages(currentPage);
  });
</script>
